<section class="form-wrapper">
  <header>
    <img
      ng-if="$ctrl.progress.current > 1"
      class="form-nav previous"
      src="assets/img/survey/fleche_retour.png"
      srcset="assets/img/survey/fleche_retour@2x.png 2x, assets/img/survey/fleche_retour@3x.png 3x"
      ng-click="$ctrl.previous()" />
    <img
      ng-if="$ctrl.progress.maxIndex > progress.current"
      class="form-nav next"
      src="assets/img/survey/fleche_suivant.png"
      srcset="assets/img/survey/fleche_suivant@2x.png 2x, assets/img/survey/fleche_suivant@3x.png 3x"
      ng-click="$ctrl.next()" />
    <h1>{{$ctrl.item.question}}</h1>
    <h2 ng-bind-html="$ctrl.item.description"></h2>
  </header>
  <div class="form-body">
    <form id="form-multiple-choice" novalidate>
      <div class="choices-wrapper">
        <button ng-repeat="choice in $ctrl.item.choices" class="button choice" ng-click="$ctrl.selectChoice(choice)" ng-class="{'selected' : choice.selected}">{{choice.text}}</button>
      </div>
      <div class="choices-wrapper" ng-if="$ctrl.item.addCustomOption">
        <button class="button choice" ng-click="$ctrl.selectChoice({meta: 'ABIBAO_CUSTOM_ANSWER'})" ng-class="{'selected' : $ctrl.customOptionAnswer.selected}">{{$ctrl.item.addCustomOptionLabel}}</button>
        <input type="text" ng-if="$ctrl.customOptionAnswer.selected" ng-model="$ctrl.customOptionAnswer.answer" placeholder="Saisir un texte" value="$ctrl.customOptionAnswer.answer" />
      </div>
      <button
        class="button submit"
        ng-click="$ctrl.submitChoice()">
        Valider
      </button>
    </form>
  </div>
</section>
